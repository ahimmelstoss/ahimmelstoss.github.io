
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>building things  | amanda himmelstoss</title>

	<meta name="author" content="amanda himmelstoss">

<meta name="description" content="When I first embarked on creating an API for a project, I couldn’t find a ton of resources on how to test it with RSpec, so I decided to write a &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="amanda himmelstoss" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">amanda himmelstoss</a></h1>
<span class="tagline">building things</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
<!-- 	<li><a href="/contact">Contact</a></li> -->
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
<!-- 	<li><a href="/contact">Contact</a></li> -->
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/07/27/testing-a-rails-api-with-rspec/">
			
				Testing Rails jBuilder JSON APIs With RSpec</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-07-27T21:17:08-04:00" pubdate data-updated="true">Jul 27<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>When I first embarked on creating an API for a project, I couldn’t find a ton of resources on how to test it with RSpec, so I decided to write a blog post about it.</p>

<p>Let’s say we’re building an app that allows users to list their second bedrooms to short-term guests. We all love Airbnb :)</p>

<p>This would be an application with many models that have complex associations, but let’s focus on what a host can do with their listing(s). They can create a new one, edit it, and delete it. A user can view one listing, or many listings (given certain filters like price, listing type, availability, city, etc). Let’s focus on the <code>GET /listings</code>, <code>POST /listings</code>, and <code>DELETE /listings/:id</code> requests that our API would support.</p>

<p>Here&rsquo;s the <a href="https://gist.github.com/ahimmelstoss/05618329e1d86aee383b">listings controller</a>. This controller ultimately inherits from <code>ActionController::Base</code>, and I’m using <a href="https://gist.github.com/ahimmelstoss/3ad4726cec98fbd4c3c1">jbuilder</a> to format the rendered JSON. Pretty straightforward.</p>

<h2>The Tests</h2>

<p>The first thing we need to do is tell each test to <code>render_views</code>, as we’re rendering JSON via jbuilder, and these are handled by Rails as views. This should go at the top before any tests.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">RSpec</span><span class="o">.</span><span class="n">describe</span> <span class="no">ListingsController</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:controller</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">render_views</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">let</span><span class="p">(</span><span class="ss">:json</span><span class="p">)</span> <span class="p">{</span> <span class="n">json</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># describe...</span>
</span></code></pre></td></tr></table></div></figure>


<h3>GET</h3>

<p>The GET /listings request should return all of the listings, with or without a filter. A simple test for this needs to:</p>

<ul>
<li>make a GET request to the index method and specify the format we’re responding with (json)</li>
<li>parse the response body into a JSON object so we can see what we’re getting back from the request (which I&rsquo;ve done once, above, in a <code>let</code> block, because this is a repeated action)</li>
<li>body looks like this:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span>
</span><span class='line'>   <span class="s2">&quot;listing_type&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;private room&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="s2">&quot;title&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Beautiful Apartment on Main Street&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="s2">&quot;price&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;50.0&quot;</span><span class="p">,</span>
</span><span class='line'> <span class="p">....</span>
</span><span class='line'>   <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">...}]</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>grab some of that JSON data to assert an expectation on</li>
<li>test that the data is what we expect it to be (against some data in our test database, in this case I just built this in a <code>before(:each)</code> block in my <code>rails_helper</code>)</li>
</ul>


<p>Here we go:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">describe</span> <span class="s2">&quot;GET /listings.json&quot;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">get</span> <span class="ss">:index</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:json</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">context</span> <span class="s1">&#39;all listings&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">it</span> <span class="s1">&#39;returns the listings&#39;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">expect</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">[</span><span class="s2">&quot;title&quot;</span><span class="o">]</span><span class="p">})</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="vi">@listing1</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next let’s test that we can return all the listings of a certain price, price being a parameter. In my <a href="https://gist.github.com/ahimmelstoss/05618329e1d86aee383b">listings controller</a>, there&rsquo;s an <code>index</code> method with a conditional to check for a <code>params[:price]</code>, and if that was given, return all listings <code>where</code> “price” is that price. Our test for this will look very much like the above test, except we’re accounting for price, which is passed into a <code>get :index</code> method along with format.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">context</span> <span class="s1">&#39;all listings given price filter&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">get</span> <span class="ss">:index</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">price</span><span class="p">:</span> <span class="mi">50</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">it</span> <span class="s1">&#39;returns the listings&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">expect</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">[</span><span class="s2">&quot;title&quot;</span><span class="o">]</span><span class="p">})</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="vi">@listing1</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>POST</h3>

<p>Now let’s work on testing our <code>POST /listings.json</code> request. We’re going to test that it can work (creating a new listing object in our database) and that it can fail (returning a 422).</p>

<p>Our success test will function much like our test for our above get requests. Instead it will call the <code>post :create</code> method which specifies the format as well as the required params for <code>:listing</code>, which we specified in a private method <code>listing_params</code> in our controller.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">describe</span> <span class="s1">&#39;POST /listings.json&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">context</span> <span class="s1">&#39;new listing success&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">post</span> <span class="ss">:create</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">:listing</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">address</span><span class="p">:</span> <span class="s2">&quot;123 Testing Lane&quot;</span><span class="p">,</span> <span class="n">listing_type</span><span class="p">:</span> <span class="s2">&quot;shared room&quot;</span><span class="p">,</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;Testing Listing&quot;</span><span class="p">,</span> <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;idk&quot;</span><span class="p">,</span> <span class="ss">price</span><span class="p">:</span> <span class="mi">1000</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span> <span class="n">neighborhood_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">host_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">it</span> <span class="s1">&#39;creates a new listing&#39;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">expect</span><span class="p">(</span><span class="no">Listing</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">address</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="s2">&quot;123 Testing Lane&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let’s also test that a failure will happen without the expected params (setting <code>neighborhood_id</code> to nil). There’s a validation on the listing model where a listing must have an associated neighborhood, which I’ve already tested in a model test. However, I wanted to test that the controller would return a 422 if the validation doesn’t pass. Here we go:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">context</span> <span class="s1">&#39;new listing failure&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">post</span> <span class="ss">:create</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:json</span><span class="p">,</span> <span class="ss">:listing</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">address</span><span class="p">:</span> <span class="s2">&quot;123 Testing Lane&quot;</span><span class="p">,</span> <span class="n">listing_type</span><span class="p">:</span> <span class="s2">&quot;shared room&quot;</span><span class="p">,</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;Testing Listing&quot;</span><span class="p">,</span> <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;idk&quot;</span><span class="p">,</span> <span class="ss">price</span><span class="p">:</span> <span class="mi">1000</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span> <span class="n">neighborhood_id</span><span class="p">:</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">host_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">it</span> <span class="s1">&#39;responds with 422&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">expect</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">422</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>DELETE</h3>

<p>Last, let’s test deleting a listing. We want to call the <code>delete :destroy</code> method with the format and the id params specified (we’re going to delete the first item in our test database). We want to test that the controller <code>destroy</code> method deletes the record from the database.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">describe</span> <span class="s1">&#39;DELETE /listings/:id.json&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">delete</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="ss">:json</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">context</span> <span class="s1">&#39;delete a listing&#39;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">it</span> <span class="s1">&#39;deletes a listing&#39;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">expect</span><span class="p">(</span><span class="no">Listing</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_empty</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>There we go! RSpec makes it easy to test Rails APIs by simulating HTTP requests via get, post, patch, and delete methods. Below are some gists of the code in full discussed in this post.</p>

<h2>Code</h2>

<ul>
<li><a href="https://gist.github.com/ahimmelstoss/05618329e1d86aee383b">listings_controller.rb</a></li>
<li><a href="https://gist.github.com/ahimmelstoss/3ad4726cec98fbd4c3c1">index.json.jbuilder</a></li>
<li><a href="https://gist.github.com/ahimmelstoss/00d5e1db0d435d11b726">listings_controller_spec.rb</a></li>
</ul>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/06/11/pass-by-value-vs-pass-by-reference-in-ruby/">
			
				Pass by Value vs. Pass by Reference in Ruby</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-06-11T18:51:39-04:00" pubdate data-updated="true">Jun 11<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Recently my world was turned upside down by something that happened while iterating over an array with the each method. It went something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;cats&quot;</span><span class="p">,</span> <span class="s2">&quot;dogs&quot;</span><span class="p">,</span> <span class="s2">&quot;squirrels&quot;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">word</span><span class="o">|</span>
</span><span class='line'>  <span class="n">word</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;!&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I expected that the return value of this block to be this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;cats&quot;</span><span class="p">,</span> <span class="s2">&quot;dogs&quot;</span><span class="p">,</span> <span class="s2">&quot;squirrels&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>But instead, it was this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;cats!&quot;</span><span class="p">,</span> <span class="s2">&quot;dogs!&quot;</span><span class="p">,</span> <span class="s2">&quot;squirrels!&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Being a beginner still in many ways, I&rsquo;m awarded moments like this where I can learn something new about something I before took for granted. I&rsquo;m used to iterating over an array with each and having the return value be the original array, because I assumed that the each method never altered the array:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">num</span><span class="o">|</span>
</span><span class='line'>  <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># =&gt; [1, 2, 3] </span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s not always the case.</p>

<p>Why? Objects in programming languages, in this context Ruby (it may be different in other languages), are either <em>passed by value</em> or <em>passed by reference</em>. Primitive data like integers, floats, fixnums, and symbols require a fixed, small amount of memory, so therefore are passed by their value. Objects that can grow and change, like arrays and strings, are never a fixed size. They are instead always <em>referenced</em> by some pointer, in order to save memory use in a program.</p>

<p>Thus, certain objects like strings and arrays are mutable within an each method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">3</span><span class="o">]].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">array</span><span class="o">|</span>
</span><span class='line'>  <span class="n">array</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1"># =&gt; [[1, 1], [2, 1], [3, 1]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here&rsquo;s another, albeit not super elegant, illustration of the (im)mutability of objects that are passed by value vs. passed by reference:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">array</span><span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</span><span class='line'><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</span><span class='line'><span class="n">number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
</span><span class='line'>  <span class="n">object</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># objects that are passed by reference are changed:</span>
</span><span class='line'>
</span><span class='line'><span class="n">push</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; [1,1]</span>
</span><span class='line'><span class="n">array</span>
</span><span class='line'><span class="c1"># =&gt; [1,1]</span>
</span><span class='line'>
</span><span class='line'><span class="n">push</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; &quot;1\u0001&quot;</span>
</span><span class='line'><span class="n">string</span>
</span><span class='line'><span class="c1"># =&gt; &quot;1\u0001&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># objects that are passed by value are not changed:</span>
</span><span class='line'><span class="n">push</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span class='line'><span class="c1"># =&gt; 2</span>
</span><span class='line'><span class="n">number</span>
</span><span class='line'><span class="c1"># =&gt; 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>The distinction between pass by value and pass by reference is important. It helps determine whether or not your method modifies certain types of data passed into that method that are also used by the rest of a program. If your data can be passed by reference, it&rsquo;s worth it to be mindful of a method&rsquo;s affect on it.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/05/01/refactoring-in-ruby/">
			
				Refactoring in Ruby</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-01T11:59:18-04:00" pubdate data-updated="true">May 1<span>st</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Lately I&rsquo;ve been giving a lot of thought into not just making something work, but making it cleaner. I&rsquo;ve been reading Sandi Metz&rsquo;s <a href="http://www.poodr.com/">Practical Object Oriented Design in Ruby</a>, which although not explicitly about refactoring, seems to have gotten me in the frame of mind to think about it. Part of me thinks this marks a shift for me from level beginner to intermediate, but actually no, because I always want to be a beginner, and also, I&rsquo;m actually still really a beginner. :)</p>

<p>When thinking about effective teaching at Flatiron (side note: I&rsquo;m back! It&rsquo;s awesome), we believe in the idea of &ldquo;Make it work. Make it right. Make it fast&rdquo;, a concept coined by Kent Beck back in the day. An effective learning process almost demands this concept: get it working so you can learn how it works, and for the sake of accomplishment. I believe this is paramount to being a junior developer. Before you learn how to be good, you need to just learn how to do it. The good part will come with time, practice, and studying eloquent code (see: POODR).</p>

<p>I&rsquo;ve been doing just that, and have been thinking about giving more time to refactoring and taking pride in making my code the best it can be (and like everything, it can always be better).</p>

<p>I&rsquo;ve been working on a simple side project that makes calls to the Github API. I&rsquo;ve been using the <a href="https://github.com/typhoeus/typhoeus">Typhoeus gem</a> for making the requests (it&rsquo;s a great gem to learn to use, for its versatility). Before refactoring, I had a bunch of methods within a class (or model, as it&rsquo;s a Rails app) that each work as an API call for something specific (to get an organization, repo, etc).</p>

<p>Here&rsquo;s what it looked like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">GithubConnection</span>
</span><span class='line'>  <span class="kp">attr_reader</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">:token</span><span class="p">,</span> <span class="ss">:orgs</span><span class="p">,</span> <span class="ss">:repos</span><span class="p">,</span> <span class="ss">:issues</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">github_data</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@username</span> <span class="o">=</span> <span class="n">github_data</span><span class="o">[</span><span class="s2">&quot;username&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="vi">@token</span> <span class="o">=</span> <span class="n">github_data</span><span class="o">[</span><span class="s2">&quot;token&quot;</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_organizations</span>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="ss">Typhoeus</span><span class="p">:</span><span class="ss">:Request</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class='line'>      <span class="s2">&quot;https://api.github.com/user/orgs&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">headers</span><span class="p">:</span> <span class="p">{</span><span class="ss">Authorization</span><span class="p">:</span> <span class="s2">&quot;token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'>    <span class="n">orgs</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">org</span><span class="o">|</span>
</span><span class='line'>      <span class="n">org</span><span class="o">[</span><span class="s2">&quot;login&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_repos</span><span class="p">(</span><span class="n">organization</span><span class="p">)</span>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="ss">Typhoeus</span><span class="p">:</span><span class="ss">:Request</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class='line'>      <span class="s2">&quot;https://api.github.com/orgs/</span><span class="si">#{</span><span class="n">organization</span><span class="si">}</span><span class="s2">/repos&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">headers</span><span class="p">:</span> <span class="p">{</span><span class="ss">Authorization</span><span class="p">:</span> <span class="s2">&quot;token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'>    <span class="n">repos</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">repo</span><span class="o">|</span>
</span><span class='line'>      <span class="n">repo</span><span class="o">[</span><span class="s2">&quot;name&quot;</span><span class="o">]</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_issues</span><span class="p">(</span><span class="n">organization</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="ss">Typhoeus</span><span class="p">:</span><span class="ss">:Request</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
</span><span class='line'>      <span class="s2">&quot;https://api.github.com/</span><span class="si">#{</span><span class="n">organization</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">repo</span><span class="si">}</span><span class="s2">/issues&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">headers</span><span class="p">:</span> <span class="p">{</span><span class="ss">Authorization</span><span class="p">:</span> <span class="s2">&quot;token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'>    <span class="n">repos</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">issue</span><span class="o">|</span>
</span><span class='line'>      <span class="n">issue</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Each method (<code>get_organizations</code>, <code>get_repos</code>, and <code>get_issues</code>) has a specific purpose (which is great! A method should be a single unit of work). But something smells, even just a little bit. I&rsquo;ve been repeating myself, with my <code>request = Typhoeus::Request.new...</code> and handling the responses via parsing. This breaks the number one rule of clean code: <strong>DRY</strong>. Don&rsquo;t Repeat Yourself. Whoops. It&rsquo;s okay, because these methods get the job done. But I can do a little better.</p>

<p>I began to think about how to fix this. What are the units of functionality that are repeated? What are they doing? And, what are the unique portions of those repeated parts (as in, <em>why</em> was I repeating myself)? How can I abstract out the repetition, and account for the unique parts?</p>

<p>Generally, each method makes an API call. The unique part is what the call is calling to. Each method is taking the response of that call and iterating through to get the data that I want. The unique part of that looping is simply what is being iterated over. I can rewrite the above into a single method that given unique data within its parameters, handles this. Note that I need to pass in an optional <code>key</code>; remember above that when iterating through the JSON object, some of the data I&rsquo;m extracting is the value in a key:value pair.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="ss">Typhoeus</span><span class="p">:</span><span class="ss">:Request</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="ss">headers</span><span class="p">:</span> <span class="p">{</span><span class="ss">Authorization</span><span class="p">:</span> <span class="s2">&quot;token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">})</span>
</span><span class='line'>    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'>    <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">to_parse</span><span class="o">|</span>
</span><span class='line'>      <span class="n">key</span> <span class="p">?</span> <span class="n">to_parse</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="p">:</span> <span class="n">to_parse</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This method encapsulates two units of work. This breaks the rule of <strong>separation of concerns</strong>. If we follow that rule, a method should really only be responsible for one unit of functionality.</p>

<p>With that, it&rsquo;s a bit clearer how I could further refactor. I can make two methods that are each a unit of functionality that take in some unique information and use that information to return different values. First, I&rsquo;ll make a method that is a scaffold for <em>some</em> API call, given what I want to call to (which is passed in as parameters).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="ss">Typhoeus</span><span class="p">:</span><span class="ss">:Request</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
</span><span class='line'>    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then I&rsquo;ll have a separate method that handles the response of that call (it calls the <code>make_request</code> method within it), parsing it and returning the data I want, given the API url provided.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">json_parse</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">make_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="ss">headers</span><span class="p">:</span> <span class="p">{</span><span class="ss">Authorization</span><span class="p">:</span> <span class="s2">&quot;token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">to_parse</span><span class="o">|</span>
</span><span class='line'>      <span class="n">key</span> <span class="p">?</span> <span class="n">to_parse</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="p">:</span> <span class="n">to_parse</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>For the sake of my application structure, I&rsquo;d like to have methods for each of those individual API calls, so I can call them on instances of the class within the controller (this is primarily for clarity on the controller end; <code>@instance.get_organizations</code> is easily understood at first glance).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">get_organizations</span>
</span><span class='line'>    <span class="n">orgs</span> <span class="o">=</span> <span class="n">json_parse</span><span class="p">(</span><span class="s2">&quot;https://api.github.com/user/orgs&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_repos</span><span class="p">(</span><span class="n">organization</span><span class="p">)</span>
</span><span class='line'>    <span class="n">repos</span> <span class="o">=</span> <span class="n">json_parse</span><span class="p">(</span><span class="s2">&quot;https://api.github.com/orgs/</span><span class="si">#{</span><span class="n">organization</span><span class="si">}</span><span class="s2">/repos&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_issues</span><span class="p">(</span><span class="n">organization</span><span class="p">,</span> <span class="n">repo</span><span class="p">)</span>
</span><span class='line'>    <span class="n">issues</span> <span class="o">=</span> <span class="n">json_parse</span><span class="p">(</span><span class="s2">&quot;https://api.github.com/repos/</span><span class="si">#{</span><span class="n">organization</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">repo</span><span class="si">}</span><span class="s2">/issues&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I could take it farther than this and refactor even more, but this is clear, concise, and has just enough syntactic sugar without being unreadable at first glance to fellow developers. The best refactoring should do this without sacrificing readability.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/02/28/css-to-sass/">
			
				Getting Sassy</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-02-28T15:35:44-05:00" pubdate data-updated="true">Feb 28<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>I recently saw on Twitter someone referring to CSS as a Cascading Shit Show. I can&rsquo;t remember who said it to give credit, but I wish I did, because it&rsquo;s rather accurate.</p>

<p>I&rsquo;m of this persuasion as well because with all of my projects, my approach to CSS seems, to me, to be sloppy and all over the place. I try to keep things organized, but it still seems unruly, or at the very least, <em>very</em> cascading.</p>

<p>I decided to dive into Sass, because it clears up these frustrations with CSS by allowing variables, inheritance (nesting and extending), and mixins. To play around with these features, I decided to refactor the style of a small project, <a href="http://etsy-map-app.herokuapp.com/">My Etsy Map</a>.</p>

<h3>Get the Sass</h3>

<p>First, if you&rsquo;re building a Ruby app without Sass pre-compiling (like Rails), you will need to include the <code>sass</code> gem in your Gemfile. My app here is a Sinatra app, which uses Rack, so not only did I have to include the gem, but in the <code>config.ru</code> file, I needed to include the <code>sass/plugin/rack</code> and use the appropriate Middleware (Sass::Plugin::Rack).</p>

<h3>Some Sass</h3>

<p>To start, I went through and refactored for DRY-ness. I noticed some repeated styles that I could abstract out into <code>variables</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$primary-height: 100%;
</span><span class='line'>$primary-bg-color: rgba(245, 245, 245, 0.8);</span></code></pre></td></tr></table></div></figure>


<p>I decided to got even more fancy and incorporate some <code>mixins</code>, because I had a couple of CSS3 styles that require browser specificity. <code>mixins</code> work like methods that take in parameters. Then you can call them later with <code>include</code>, while providing the appropriate value:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@mixin background-size($size) {
</span><span class='line'>  -webkit-background-size: $size;
</span><span class='line'>  -moz-background-size: $size;
</span><span class='line'>  -o-background-size: $size;
</span><span class='line'>  background-size: $size;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>@mixin border-radius($radius) {
</span><span class='line'>  -webkit-border-radius: $radius;
</span><span class='line'>  -moz-border-radius: $radius;
</span><span class='line'>  -ms-border-radius: $radius;
</span><span class='line'>  -o-border-radius: $radius;
</span><span class='line'>  border-radius: $radius;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>//and later:
</span><span class='line'>@include background-size(cover);
</span><span class='line'>
</span><span class='line'>@include border-radius(5px);</span></code></pre></td></tr></table></div></figure>


<p>I also played around with <code>nesting</code>, making use of the <code>&amp;</code> to reference the parent selectors on my a:hover:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.footer {
</span><span class='line'>  position: absolute;
</span><span class='line'>  bottom: 0;
</span><span class='line'>  margin-top: -60px;
</span><span class='line'>  height: 60px;
</span><span class='line'>  clear: both;
</span><span class='line'>  padding-top: 20px;
</span><span class='line'>  background-color: $primary-bg-color;
</span><span class='line'>  width: 100%;
</span><span class='line'>  a {
</span><span class='line'>  color: #5CB85C;
</span><span class='line'>  &:hover { color: #3d8b3d; }
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>The CSS output of this assigns the <code>.footer</code> class to the a element and the hover selector styles; this saves me from typing <code>.footer</code> on all of the elements that have that class, as well as keeps it organized.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.footer {
</span><span class='line'>  position: absolute;
</span><span class='line'>  bottom: 0;
</span><span class='line'>  margin-top: -60px;
</span><span class='line'>  height: 60px;
</span><span class='line'>  clear: both;
</span><span class='line'>  padding-top: 20px;
</span><span class='line'>  background-color: rgba(245, 245, 245, 0.8);
</span><span class='line'>  width: 100%; }
</span><span class='line'>  .footer a {
</span><span class='line'>    color: #5CB85C; }
</span><span class='line'>    .footer a:hover {
</span><span class='line'>      color: #3d8b3d; }</span></code></pre></td></tr></table></div></figure>


<h3>Compiling</h3>

<p>Compiling Sass into CSS is necessary, as the browser only reads CSS. After I wrote my styles in a Sass file (.scss), I had to Sass-ify it by simply running the <code>sass</code> command within the root drectory of my project, where your .scss file is turned into a .css file. The sass command takes [options], like the super useful &mdash;watch, which as you can guess, watches for changes to your .scss and compiles the .css as the changes are made. But if you just want to simply compile, just include the [input] (.scss) and the [output] (.css) files.</p>

<p>Sass is super fun and coming from Ruby, logically familiar to me. I&rsquo;m excited to start incorporating it into all of my projects from now on, as it clears up most of the frustrations with CSS.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/02/04/from-ruby-to-php/">
			
				From Ruby to PHP</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-02-04T13:43:09-05:00" pubdate data-updated="true">Feb 4<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Here in my blog, I&rsquo;ve been chronicling my journey to learn PHP, coming from Ruby as my first programming language. It&rsquo;s been a interesting journey so far; while PHP and Ruby share some similarities as scripting languages, the other components and technologies surrounding them are different, at least for me as a beginner in PHP. I wanted to write a blog post about the certain steps I&rsquo;ve made, including outlining the resources I&rsquo;ve found and the stacks I&rsquo;ve been learning in this transition. If you&rsquo;re coming from Ruby to PHP, I hope this post can help you get started.</p>

<p>After I got the building blocks of PHP out of the way, learning the new syntax through various resources (including Codecademy) and books, I took the next step in my learning by re-envisioning a project I worked on during my time at Flatiron called <a href="http://guideme.herokuapp.com/">GuideMe</a>. My choice to take a project I had already done was for a few reasons: The models and their relationships have already been imagined, so I could jump right into learning a new ORM more easily; I also have all of the styling (Bootstrap and otherwise) set up, which would make my project look prettier during the beginning stages of coding it; And, in this case, GuideMe is a relatively uncomplicated concept that would allow me to concentrate on learning the stacks. I think all of this helps for a first major project in another language.</p>

<p>With the help of the incredibly patient and helpful <a href="http://matthewturland.com/">Matthew Turland</a>, whose been a great resource during my journey into PHP, I came up with a strategy on how to tackle this project. First I should note that it is my impression, given my experience (and this could be from my then limited exposure working with the technologies Flatiron focused on), Ruby is relatively contained: to get the job done, there are a few well constructed technologies that basically everyone uses (for example, Bundler, ERB, Rails, or Sinatra). However, in the PHP world, there are many choices of tools to use (different dependency management strategies, many different frameworks, and various templating options).</p>

<p>I decided to work with things I found relatively similar to what I&rsquo;ve been working with in Ruby, simply because these Ruby technologies work well. I&rsquo;m going to go through each part of my stack I&rsquo;m currently working on and discuss what makes them great for Rubyists turned PHPists.</p>

<h3>Composer</h3>

<p>I&rsquo;ll admit I chose <a href="https://getcomposer.org/">Composer</a> because it&rsquo;s what we&rsquo;re currently using at my company. It&rsquo;s relatively new, but the documentation is solid and it&rsquo;s not unlike Bundler for managing your Ruby gems. Installing composer within your project directory creates a <code>composer.json</code> file, where you can require all of your dependencies and files for autoload.</p>

<h3>Doctrine ORM</h3>

<p><a href="http://docs.doctrine-project.org/en/latest/">Doctrine</a> ORM is a DataMapper ORM that I chose to learn because, again, the documentation is pretty straightforward. They have a tutorial that&rsquo;s helpful in walking you through setting up a simple project. With Doctrine, you create entities, or models, that serve to map your objects onto a database. Each model is a class, and within that class, you can map your object&rsquo;s relations to other objects. Below is my model for my Topic object:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Doctrine\Common\Collections\ArrayCollection</span><span class="p">;</span>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * @Entity @Table(name=&quot;topics&quot;)</span>
</span><span class='line'><span class="sd"> **/</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Topic</span> <span class="p">{</span>
</span><span class='line'>  <span class="sd">/** @Id @Column(type=&quot;integer&quot;) @GeneratedValue **/</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$id</span><span class="p">;</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @Column(type=&quot;string&quot;)</span>
</span><span class='line'><span class="sd">   * @var string</span>
</span><span class='line'><span class="sd">   */</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$title</span><span class="p">;</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @Column(type=&quot;string&quot;)</span>
</span><span class='line'><span class="sd">   * @var string</span>
</span><span class='line'><span class="sd">   */</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$description</span><span class="p">;</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @ManyToOne(targetEntity=&quot;User&quot;, inversedBy=&quot;topics&quot;)</span>
</span><span class='line'><span class="sd">   **/</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$user</span><span class="p">;</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @OneToMany(targetEntity=&quot;Suggestion&quot;, mappedBy=&quot;topic&quot;)</span>
</span><span class='line'><span class="sd">   * @var Suggestion[]</span>
</span><span class='line'><span class="sd">   **/</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$suggestions</span><span class="p">;</span>
</span><span class='line'>  <span class="sd">/**</span>
</span><span class='line'><span class="sd">   * @ManyToMany(targetEntity=&quot;Tag&quot;, inversedBy=&quot;topics&quot;)</span>
</span><span class='line'><span class="sd">   * @JoinTable(name=&quot;topics_tags&quot;)</span>
</span><span class='line'><span class="sd">   **/</span>
</span><span class='line'>  <span class="k">protected</span> <span class="nv">$tags</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayCollection</span><span class="p">();</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">suggestions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayCollection</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getTitle</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">setTitle</span><span class="p">(</span><span class="nv">$title</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="nv">$title</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getDescription</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">setDescription</span><span class="p">(</span><span class="nv">$description</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">description</span> <span class="o">=</span> <span class="nv">$description</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getUser</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">setUser</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">user</span> <span class="o">=</span> <span class="nv">$user</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getSuggestions</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">suggestions</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">setSuggestions</span><span class="p">(</span><span class="nv">$suggestions</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">suggestions</span> <span class="o">=</span> <span class="nv">$suggestions</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">getTags</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">public</span> <span class="k">function</span> <span class="nf">setTags</span><span class="p">(</span><span class="nv">$tags</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span> <span class="o">=</span> <span class="nv">$tags</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s say I have a page that displays all of the topics. With my above model in place, I can then iterate through <code>$topics</code> (managed by the <code>entityManager</code> class, as outlined <a href="http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html">here</a>) like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">foreach</span> <span class="p">(</span><span class="nv">$topics</span> <span class="k">as</span> <span class="nv">$topic</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">echo</span> <span class="nv">$topic</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">()</span>
</span><span class='line'>  <span class="k">echo</span> <span class="nv">$topic</span><span class="o">-&gt;</span><span class="na">getDescription</span><span class="p">()</span>
</span><span class='line'>  <span class="k">echo</span> <span class="nv">$topic</span><span class="o">-&gt;</span><span class="na">getUser</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span>
</span><span class='line'>  <span class="o">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Slim Framework</h3>

<p><a href="http://docs.slimframework.com/">Slim</a> is a lightweight framework inspired by Sinatra. The documentation for it is great, and for those that love Sinatra, it&rsquo;s familiar.</p>

<p>Once Slim is required by Composer (so easy!), within the home directory of your project, set up an <code>index.php</code> file (like <code>app.rb</code> in Sinatra), where you&rsquo;ll keep your routes and instantiate a new Slim object (your app). For sake of clarity, depending on the size of the project, you can keep <code>index.php</code> as the runner file to run your application, and <code>require</code> other route files that you can organize elsewhere (I have a routes directory I keep them all in, and each file corresponds with an object; while called routes, I like to think of them as Controllers).</p>

<p>Here&rsquo;s an example of a route in Slim, taken from the documentation. Not unlike Sinatra at all!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello/:name&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are also full-stack frameworks within the PHP world. The two most popular ones that have evolved nicely with the language are <a href="http://symfony.com/">Symfony</a> and <a href="http://framework.zend.com/">Zend</a>.</p>

<h3>Templating</h3>

<p>There are many options for templating in PHP. While both <a href="http://twig.sensiolabs.org/">Twig</a> and <a href="http://www.smarty.net/">Smarty</a> are quite popular, I wanted to go with something that didn&rsquo;t require learning another markdown language, but instead uses PHP; essentially I wanted the ERB equivalent. <a href="http://phpsavant.com/docs/">Savant3</a> is incredibly easy to use. The bulk of what it does is pass your object to an instance of the Savant class. Here is my route for displaying one topic by id. I create a new instance of the Savant class, <code>$tpl</code>, pass my already collected instance of Topic (<code>$topic</code>) to it, and then render it through Savant&rsquo;s <code>display()</code> method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/topics/:id&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="k">use</span><span class="p">(</span><span class="nv">$entityManager</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$topic</span> <span class="o">=</span> <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s2">&quot;Topic&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$id</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nv">$tpl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Savant3</span><span class="p">();</span>
</span><span class='line'>  <span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">topic</span> <span class="o">=</span> <span class="nv">$topic</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$tpl</span><span class="o">-&gt;</span><span class="na">display</span><span class="p">(</span><span class="s1">&#39;views/topics/show.tpl.php&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>In my <code>show.tpl.php</code> file, I refer to <code>$tpl-&gt;topic</code> as <code>$this-&gt;topic</code>. Passing the object like this as well passes all of its class functions, like <code>getTitle()</code>, <code>getUser()</code>, etc.</p>

<h3>Conclusion</h3>

<p>PHP has a lot of tools out there for web development; I chose all of these because they embody characteristics of similar tools in Ruby that I love. I&rsquo;m open to any suggestions for other great tools from those who code in both Ruby and PHP! :)</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/01/29/closures-in-php/">
			
				Closures in PHP</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-01-29T19:33:12-05:00" pubdate data-updated="true">Jan 29<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Like JavaScript, PHP as well has anonymous functions, also referred to as <code>closures</code> (while related, not the same as closures in functional programming). I first came across anonymous functions in JavaScript, but recently learned about their PHP counterpart while playing around with <a href="http://www.slimframework.com/">Slim</a>, a PHP framework not unlike Sinatra, which I ♥. Closures are an important part of route declarations in Slim:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="c1">//taken from the Slim Documentation:</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello/:name&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s2">&quot;Hello, </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>The application that I am building on Slim uses Doctrine ORM. The ORM handles object retrieval through the <code>EntityManager</code> class. Using a call to <code>EntityManager</code>, I can access my objects and then be able to use them within my application.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="c1">// obtaining the entity manager; $conn is my database access and $config is my model configuration</span>
</span><span class='line'><span class="nv">$entityManager</span> <span class="o">=</span> <span class="nx">EntityManager</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>I still needed a way to pass the instance of <code>EntityManager</code> to my Slim routes. One way, of course, would be to make this instance a <code>global</code> variable. While useful, <code>global</code> variables are not the cleanest way to code. I might not want every function in my application to have access to this variable.</p>

<p>However, closures in PHP can inherit variables from the parent scope in a much more controlled and cleaner way with the <code>use</code> construct. The parent scope of the closure is where the closure is declared, and lucky for me, my code is organized as such that my <code>$entityManager</code> declaration lives in that same scope.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/topics&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="k">use</span><span class="p">(</span><span class="nv">$entityManager</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nv">$dql</span> <span class="o">=</span> <span class="s2">&quot;SELECT t, u FROM Topic t JOIN t.user u ORDER BY t.id DESC&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">createQuery</span><span class="p">(</span><span class="nv">$dql</span><span class="p">);</span>
</span><span class='line'>  <span class="nv">$topics</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//I&#39;m dynamically doing things with my $topics here</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/01/09/fulltext-in-mysql/">
			
				FULLTEXT in MySQL</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-01-09T20:11:13-05:00" pubdate data-updated="true">Jan 9<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>When querying your database of cats (as one does) using MySQL, sometimes a simple <code>SELECT * FROM cats WHERE bio LIKE '%boxes%';</code> is either not strong enough (this query would obviously return many cats), or just inefficient and expensive, as it results in a full table scan. Instead, a <code>FULLTEXT</code> search is more nuanced, allowing you to run more explicit and multi-worded queries on your database.</p>

<p>There is one thing to first think about in regards to <code>FULLTEXT</code>. First, depending on the version of MySQL you are using, <code>FULLTEXT</code> may only work on a MyISAM type table (as of <a href="http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html#innodb-fulltext-index">5.6</a>, InnoDB also supports <code>FULLTEXT</code>). I could write a whole post about the differences between MyISAM and InnoDB, but for now, <a href="http://stackoverflow.com/questions/15678406/when-to-use-myisam-and-innodb">this</a> Stack Overflow post sums it up nicely instead.</p>

<p>Once you know your engine type and its <code>FULLTEXT</code> search capabilities, the first step is to make sure that the columns you want to query are indexed for <code>FULLTEXT</code>. If your table is already created, the <code>ALTER</code> command is necessary to change it.</p>

<p>In my table Cats, there are the following columns: <code>cat_id</code>, <code>name</code>, <code>age</code>, <code>gender</code>, <code>breed</code>, <code>location</code>, and <code>bio</code>. Let&rsquo;s say I want to be able to run a <code>FULLTEXT</code> search on cats&#8217; biographies:</p>

<p><code>ALTER TABLE cats ADD FULLTEXT (bio);</code></p>

<p>Running a <code>FULLTEXT</code> search is simple with the use of a <code>WHERE</code> clause, with a <code>MATCH...AGAINST</code> added in:</p>

<p><code>SELECT name, bio FROM cats WHERE MATCH (bio) AGAINST ('boxes Japan');</code></p>

<p>(In my example, this would return Maru.)</p>

<p><code>FULLTEXT</code> has some important rules. Keywords that are less than four characters will be ignored; popular words (stopwords, like &lsquo;and&rsquo;, &lsquo;the&rsquo;, etc.) are also ignored; and, if more than half of the record match the keywords, the query won&rsquo;t return anything at all. This last one is important and should be remembered, as you can become puzzled when your search returns nothing. This is because <code>FULLTEXT</code> wants to return relevant, specific results.</p>

<p>There are also some useful parameters that can help querying even further. Add <code>IN BOOLEAN MODE</code> to the <code>AGAINST</code> clause, and you can further specify if a word must be included (&lsquo;+boxes&rsquo;) or excluded (&lsquo;-California&rsquo;), as well as a word and its variations (the wildcard: &lsquo;box*&rsquo; can return &lsquo;box&rsquo; and &lsquo;boxes&rsquo;). It should be noted if you&rsquo;re using boolean mode, the results will not be ordered or sorted by relevance. An <code>ORDER BY</code> clause after the <code>AGAINST</code> clause with the parameters you need will do this. Borrowing from my previous example, let&rsquo;s say I&rsquo;m looking for cats who like boxes, but I&rsquo;m most interested in those who also live in Japan:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SELECT name, bio, 
</span><span class='line'>  MATCH (bio) AGAINST ('boxes &gt;Japan' IN BOOLEAN MODE) 
</span><span class='line'>  AS japanese_box_relevance 
</span><span class='line'>FROM cats 
</span><span class='line'>WHERE MATCH (bio) AGAINST ('boxes &gt;Japan' IN BOOLEAN MODE) 
</span><span class='line'>ORDER BY japanese_box_relevance DESC;</span></code></pre></td></tr></table></div></figure>


<p><code>FULLTEXT</code> is a great feature of MyISAM/newer InnoDB tables, but there are some drawbacks. If you&rsquo;re strictly InnoDB and using an older version of MySQL, or you have heavy traffic, for example, you may need other options, like a strictly fulltext search server like <a href="http://sphinxsearch.com/about/sphinx/">Sphinx</a>.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2014/01/06/notes-on-sql/">
			
				Notes on SQL</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-01-06T21:47:00-05:00" pubdate data-updated="true">Jan 6<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>In part with my PHP learning, I am reading Larry Ullman&rsquo;s <a href="http://www.amazon.com/PHP-MySQL-Dynamic-Web-Sites/dp/0321784073">PHP and MySQL for Dynamic Websites</a>, which has been reintroducing me to raw SQL statements, after living in Railsland for the last two months. I had forgotten how much I love SQL, for its clean querying and data organizing.</p>

<p>One thing that we were left to think about at Flatiron was the idea of code as a story. Code tells the story of your web application: there&rsquo;s the setting, characters, and information about the characters. Databases are the heart of that story, because they illustrate the connections between your code&rsquo;s characters. And SQL&rsquo;s <code>JOIN</code> query is at the heart of how these connections are told.</p>

<p>As a refresher, <code>JOIN</code> is a query that uses two or more tables, essentially creating a virtual table between them (you never really see this table, however). The most common join, and the focus of my post is the inner join. An inner join returns all of the database records from the named tables where a match is made on the specified criteria.</p>

<p>I&rsquo;m going to be lazy about my examples here and adapt them from Larry Ullman&rsquo;s forum. A brief synopsis of the story about the forum. This database has messages table (a message has a subject, name, message, posted date, etc), a forum table (a forum has a subject), and users table (a user has a name, email, password, etc). On these tables, there are primary keys as integers. The relationship is that a message has one user and one forum (so there are foreign keys* for both on the messages table).</p>

<p>Let&rsquo;s say I want to find all of the messages on a forum that have the subject &ldquo;Cats&rdquo;. There are three ways to do this.</p>

<p>The first does not actually utilize a <code>JOIN</code> statement:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='mysql'><span class='line'><span class="k">SELECT</span> <span class="n">m</span><span class="p">.</span><span class="n">message_id</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">messages</span> <span class="k">AS</span> <span class="n">m</span><span class="p">,</span> <span class="n">forums</span> <span class="k">AS</span> <span class="n">f</span>
</span><span class='line'><span class="k">WHERE</span> <span class="n">m</span><span class="p">.</span><span class="n">forum_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">forum_id</span> <span class="k">AND</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Cats&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The downside of running this query is that it overloads the <code>WHERE</code> clause, both limiting (where the forum_ids match) and describing (the forum subject as &ldquo;Cats&rdquo;). This isn&rsquo;t necessarily more expensive on the database, but it is not the clearest way to query.</p>

<p>Using a <code>JOIN</code> is cleaner and more descriptive:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='mysql'><span class='line'><span class="k">SELECT</span> <span class="n">m</span><span class="p">.</span><span class="n">message_id</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">messages</span> <span class="k">AS</span> <span class="n">m</span> <span class="k">JOIN</span> <span class="n">forums</span> <span class="k">AS</span> <span class="n">f</span>
</span><span class='line'><span class="k">ON</span> <span class="n">m</span><span class="p">.</span><span class="n">forum_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">forum_id</span>
</span><span class='line'><span class="k">WHERE</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Cats&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here I&rsquo;m using the <code>ON</code> clause to describe the relationship between the forum_id in the forum&rsquo;s table and the forum_id (as a foreign key) on the messages table.</p>

<p>For some syntactic sugar, there&rsquo;s an even nicer way to write this with a <code>USING</code> clause:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='mysql'><span class='line'><span class="k">SELECT</span> <span class="n">m</span><span class="p">.</span><span class="n">message_id</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">messages</span> <span class="k">AS</span> <span class="n">m</span> <span class="k">JOIN</span> <span class="n">forums</span> <span class="k">AS</span> <span class="n">f</span>
</span><span class='line'><span class="k">USING</span> <span class="p">(</span><span class="n">forum_id</span><span class="p">)</span>
</span><span class='line'><span class="k">WHERE</span> <span class="n">f</span><span class="p">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Cats&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>A <code>USING</code> clause is only possible if you name your primary key the same way in both tables. In this case, a clean way of doing that is <em>tablename</em>_id.</p>

<p>This is a very common type of query on a database, so writing it the way that seems cleanest is an important practice. I like the sound of the <code>USING</code> clause, so therefore prefer it.</p>

<p>*Foreign keys connect two tables in order to illustrate the relationship between them, and most importantly, to prevent bad data. A message&rsquo;s forum_id as a foreign key points back to a forum&rsquo;s id, signaling that that message belongs to that forum. So if you want to delete an entire forum, having the forum_id on the messages that belong to it prevents you from doing so without first deleting those messages. Without a foreign key in place, you can be left with bad data: messages from a deleted forum are left lying around.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2013/12/31/the-splfixedarray-class/">
			
				The SplFixedArray Class</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-12-31T18:56:00-05:00" pubdate data-updated="true">Dec 31<span>st</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>Another type of data structure that is unique to PHP is the SplFixedArray. This is a class that embodies much of the same functionality as an indexed array, but performs slightly different.</p>

<p>Arrays in PHP, while functionally similar to arrays in other languages, like Ruby, more closely resemble hashes, as both indexed and associative arrays both use key => value pairs, where the key can be either an integer or a string. However, SplFixedArrays are not unlike arrays found within Ruby. Their indexes are fixed integers, and their performance is better on a large scale than an associative array.</p>

<p>An SplFixedArray has a fixed size (other arrays in PHP can be any size) that is determined in the  instantiation. Below, I&rsquo;ve instantiated a new SplFixedArray (remember, it&rsquo;s a class!) and set four of the values.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$cats</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SplFixedArray</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</span><span class='line'><span class="nv">$cats</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Maru&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$cats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Grumpy Cat&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$cats</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Nala Cat&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$cats</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Chairman Meow&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To increase the size of <code>$cats</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$cats</span><span class="o">-&gt;</span><span class="na">setSize</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The value of <code>$cats[4];</code> will be NULL until it&rsquo;s set. (Note that <code>setSize();</code> is a class function.)</p>

<p>The SplFixedArray is a great data structure that is more optimal in some cases, and for the Rubyists who love Ruby arrays, very familiar. :)</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2013/12/27/arrays-in-php/">
			
				Arrays in PHP, Continued</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-12-27T12:38:00-05:00" pubdate data-updated="true">Dec 27<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>In continuing to learn about arrays and data structures in PHP, I&rsquo;ve been playing around with a few cool functions.</p>

<p><code>array_column();</code> is a handy method in PHP5.5 that returns all of the values of a single column, given the key.</p>

<p>Let&rsquo;s say I had the following associated array:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$catCelebs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="k">array</span><span class="p">(</span>
</span><span class='line'>        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Maru&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;breed&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Scottish Fold&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">6</span>
</span><span class='line'>    <span class="p">),</span>
</span><span class='line'>    <span class="k">array</span><span class="p">(</span>
</span><span class='line'>        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Nala Cat&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;breed&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Siamese mix&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span>
</span><span class='line'>    <span class="p">),</span>
</span><span class='line'>    <span class="k">array</span><span class="p">(</span>
</span><span class='line'>        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Lil Bub&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;breed&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Domestic Shorthair&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span>
</span><span class='line'>    <span class="p">),</span>
</span><span class='line'>    <span class="k">array</span><span class="p">(</span>
</span><span class='line'>        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Tardar Sauce&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;breed&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Siamese&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>If I wanted all of the cat&rsquo;s names, I would write:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$catNames</span> <span class="o">=</span> <span class="nx">array_column</span><span class="p">(</span><span class="nv">$catCelebs</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>array_key_exists();</code> is a function that checks if an array contains a given key, returning true or false.</p>

<p>From <code>$catCelebs</code> above, if I wanted to check if age was an included column, I would write:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="nv">$catCelebs</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s2">&quot;We know the ages of the celebrity cats!&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similar to this are two other useful functions that allow you to search arrays: <code>in_array();</code> searches an array for a value and returns true or false if it exists, and <code>array_search();</code> looks for a value and returns its key if it exists, and false otherwise.</p>

<p><code>array_unique();</code>, much like the name suggests, will remove duplicates from a given array, the return of that being a new array. This function does not change the original array, so reassignment would be necessary.</p>

		
		
	</div>

</article>


    <nav id="pagenavi">
        
        
            <a href="/blog/page/2/" class="next">Next</a>
        
    </nav>

</div>
	<footer id="footer" class="inner">&copy; 2014

    amanda himmelstoss

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'ahimmelstoss';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






</body>
</html>
